name: CI
on: [push]
jobs:
  test-sanity:
    runs-on: ubuntu-latest
    container:
      image: nginx:latest
    env:
      REZILION_LICENSE_KEY: ${{ secrets.REZILION_LICENSE_KEY }}
      - name: Rezilion
      uses: Rezilion/github-action@v2.3.0

    steps:
      - uses: actions/checkout@v3
      - uses: ./.gitlab/actions/Rezilion
        with:
          mode: 'start'
          image_name: 'nginx:latest'
          command: 'sleep 5'
      
  Rezilion:
    needs: [test-sanity]
    runs-on: ubuntu-latest
    container:
      image: centos:centos7
    env:
      REZILION_LICENSE_KEY: ${{ secrets.REZILION_LICENSE_KEY }}
    steps:
      - uses: actions/checkout@v3
      - uses: ./.gitlab/actions/Rezilion
        with:
          mode: 'validate'
              
      
  
